<UserControl x:Class="EZRClone.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:EZRClone.ViewModels"
             mc:Ignorable="d"
             d:DataContext="{d:DesignInstance vm:SettingsViewModel}"
             Loaded="OnLoaded"
             Background="{DynamicResource BackgroundBrush}">
    <StackPanel Margin="24" MaxWidth="600" HorizontalAlignment="Left">
        <TextBlock Text="Settings" FontSize="22" FontWeight="SemiBold"
                   Foreground="{DynamicResource ForegroundBrush}"
                   Margin="0,0,0,24" />

        <!-- RClone exe path -->
        <TextBlock Text="RClone Executable Path:" Foreground="{DynamicResource ForegroundBrush}" Margin="0,0,0,6" />
        <Grid Margin="0,0,0,6">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBox Text="{Binding RCloneExePath, UpdateSourceTrigger=PropertyChanged}"
                     Padding="6,4" />
            <Button Grid.Column="1" Content="Browse..."
                    Click="OnBrowseExe" Margin="8,0,0,0" />
        </Grid>

        <!-- Validation message -->
        <TextBlock Margin="0,0,0,20" FontSize="12">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Setter Property="Foreground" Value="{DynamicResource ForegroundSecondaryBrush}" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsValid}" Value="True">
                            <Setter Property="Foreground" Value="#4EC9B0" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
            <Run Text="{Binding ValidationMessage, Mode=OneWay}" />
        </TextBlock>

        <!-- Config file path -->
        <TextBlock Text="Config File Location:" Foreground="{DynamicResource ForegroundBrush}" Margin="0,0,0,6" />
        <Grid Margin="0,0,0,6">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBox Text="{Binding RCloneConfigPath, UpdateSourceTrigger=PropertyChanged}"
                     Padding="6,4" />
            <Button Grid.Column="1" Content="Override..."
                    Click="OnBrowseConfig" Margin="8,0,0,0" />
        </Grid>
        <TextBlock Text="Leave blank to auto-detect from rclone."
                   Foreground="{DynamicResource ForegroundSecondaryBrush}" FontSize="11"
                   Margin="0,0,0,24" />

        <!-- Default download path -->
        <TextBlock Text="Default Download Path:" Foreground="{DynamicResource ForegroundBrush}" Margin="0,0,0,6" />
        <Grid Margin="0,0,0,6">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBox Text="{Binding DefaultDownloadPath, UpdateSourceTrigger=PropertyChanged}"
                     Padding="6,4" />
            <Button Grid.Column="1" Content="Browse..."
                    Click="OnBrowseDownloadPath" Margin="8,0,0,0" />
        </Grid>
        <TextBlock Text="Default folder for downloads from Browse. You can override per download."
                   Foreground="{DynamicResource ForegroundSecondaryBrush}" FontSize="11"
                   Margin="0,0,0,24" />

        <!-- Always get directory info -->
        <CheckBox Content="Always get directory info when browsing"
                  IsChecked="{Binding AlwaysGetDirectoryInfo}"
                  Foreground="{DynamicResource ForegroundBrush}"
                  Margin="0,0,0,6" />
        <TextBlock Text="Automatically fetch recursive file counts and sizes for directories. Can be slow on large remotes."
                   Foreground="{DynamicResource ForegroundSecondaryBrush}" FontSize="11"
                   TextWrapping="Wrap"
                   Margin="0,0,0,24" />

        <!-- Save -->
        <Button Content="Save" Style="{DynamicResource AccentButton}"
                Command="{Binding SaveCommand}" HorizontalAlignment="Left" />
    </StackPanel>
</UserControl>
